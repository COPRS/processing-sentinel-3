spring:
  main:
    banner-mode: "off"
  application:
    name: s3-pug-production-trigger
    
# Logging
logging:
  config: ${log4j_config:log/log4j2.yml}
  
mqi:
  host-uri: http://localhost:8081                               # the host and port for querying MQI server
  max-retries: 45                                                # the maximal number of consecutive retries following a MQI request error 
  tempo-retry-ms: 2000
  message-filter:
  - productFamily: S3_L0
    allowRegex: "S3(A|B)_(OL_0_EFR___|SL_0_SLT___|SR_0_SRA___).*"
  - productFamily: S3_L1_NRT
    allowRegex: "S3(A|B)_(OL_1_EFR___|OL_1_ERR___|SL_1_RBT___|SR_1_SRA___).*"
  - productFamily: S3_L2_NRT
    allowRegex: "S3(A|B)_(OL_2_LFR___|OL_2_LRR___|SL_2_LST___|SR_2_LAN___).*"
 
metadata:
  host: ${catalog_rest_host} 
  rest-api_nb-retry: 100  
  rest-api_tempo-retry-ms: 3000 

# KAFKA config for error queue
kafka:
  bootstrap-servers: ${kafka_bootstrap-servers:kafka-headless:9092}   # the bootstrap servers for KAFKA
  group-id: error                                                # the group identifier to use for KAFKA publishers  
  max-retries: 10                                                # number of retries if kafka is not available
  error-topic: t-pdgs-errors

appcatalog:
  host-uri: http://s1pro-app-catalog-svc:8080                    # URI of the applicative data catalog APIs -DMA-
  max-retries: 3                                                 # Nb Max of retry to connect API 
  tempo-retry-ms: 1000                                           # Tempo before a retry to connect API  
  tm-connect-ms: 5000                                            # Timeout of connections to the API  

status:
  delete-fixed-delay-ms: 1800000                                   # (fixed delay) period in milliseconds between 2 check if application shall be stopped or not
  max-error-counter-processing: 3                                  # the number of consecutive processing errors leading to the state FATALERROR
  max-error-counter-mqi: 30                                        # the number of consecutive MQI errors leading to the state FATALERROR
  
tasktable:
  pathroutingxmlfile: /app/config/routing.xml                      # Location of the routing file
  routingKeyTemplate: $(product.productType)_$(product.satelliteId)

process:
  level: S3_PDU                                                        # Level for job generator 
  hostname: ${HOSTNAME}                                            # Hostname 
  fixed-delay-ms: 200                                              # (Fixed delay) Dealy in milliseconds between 2 next messages
  initial-delay-ms: 5000                                           # Initial delay in missliseconds before the first next message
  category: s3-products

